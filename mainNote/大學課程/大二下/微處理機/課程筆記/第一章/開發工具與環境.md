# 開發工具與環境

本節介紹 STM32 微控制器開發所需的軟體工具和環境設置。

## 開發環境選項

### Keil MDK

Keil MDK (Microcontroller Development Kit) 是 ARM 官方推薦的開發環境，專為 ARM Cortex-M 系列微控制器設計。

**主要特點**：
- 整合式開發環境 (IDE)
- ARM C/C++ 編譯器
- 組譯器和連結器
- 除錯工具
- CMSIS (Cortex Microcontroller Software Interface Standard) 支援
- 豐富的程式碼範例

**缺點**：
- 完整版需要付費授權
- 免費版有程式碼大小限制 (32KB)

### STM32CubeIDE

STM32CubeIDE 是 ST 公司提供的免費整合開發環境，基於 Eclipse 平台。

**主要特點**：
- 完全免費
- 整合 STM32CubeMX 圖形化配置工具
- 支援 GCC 編譯器
- 內建除錯功能
- 支援 ST-Link 和 J-Link 等除錯器
- 提供 HAL (硬體抽象層) 和 LL (底層) 函式庫

**函式庫比較**：
- **Cube HAL**：硬體抽象層，易於使用但效能較低
- **Cube LL**：底層函式庫，效能較好但較複雜
- **SPL**：標準週邊函式庫 (舊版)
- **Register Direct Access**：直接存取暫存器，效能最佳但最複雜

## 模擬器

### PICSimLab

PICSimLab 是一款開源的微控制器模擬器，支援多種微控制器，包括 STM32。

**主要特點**：
- 圖形化介面
- 支援多種虛擬硬體板
- 可模擬 LED、按鈕、LCD 等週邊
- 支援 UART、SPI、I2C 等通訊協定
- 可與實際開發環境整合

## 簡單程式範例

### 延遲函式範例 (C 語言)

```c
// 簡單的毫秒延遲函式
void delay_ms(uint32_t ms) {
    uint32_t i, j;
    for (i = 0; i < ms; i++) {
        for (j = 0; j < 12000; j++) {  // 調整此值以匹配 CPU 頻率
            __NOP();  // 無操作指令
        }
    }
}
```

### GPIO 控制範例 (C 語言)

```c
// 初始化 GPIO 接腳為輸出模式
void GPIO_Init(void) {
    // 啟用 GPIOC 時脈
    RCC->APB2ENR |= RCC_APB2ENR_IOPCEN;
    
    // 設定 PC13 為推挽輸出，最大速度 50MHz
    GPIOC->CRH &= ~(0xF << 20);  // 清除原有設定
    GPIOC->CRH |= (0x3 << 20);   // 設為輸出模式
}

// 切換 LED 狀態
void Toggle_LED(void) {
    GPIOC->ODR ^= (1 << 13);  // 切換 PC13 狀態
}
```

## 相關資源

- [Keil MDK 官方網站](https://www2.keil.com/mdk5)
- [STM32CubeIDE 下載頁面](https://www.st.com/en/development-tools/stm32cubeide.html)
- [PICSimLab 官方網站](https://sourceforge.net/projects/picsimlab/)
- [STM32 HAL 函式庫文件](https://www.st.com/resource/en/user_manual/dm00105879-description-of-stm32f4-hal-and-ll-drivers-stmicroelectronics.pdf)

## 返回

- [[課程介紹與基礎|返回第一章目錄]]
- [[微處理機概述|返回微處理機概述]]
