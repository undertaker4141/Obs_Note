---
banner: 模板/banner.jpg
banner_y: "86.5"
---
# 基本檔案處理

(來源: c7_basic_file_processing.pdf)

## 檢視文字檔案內容

### 檢視完整檔案

- `cat [options] [file-list]`: 連接並顯示檔案內容至標準輸出 (預設為螢幕)。
    
    - `-n`: 顯示行號。
        
    - `-e`: 與 `-v` 一起使用時，在每行末尾顯示 `$`。
        
    - 若無 `file-list`，從標準輸入讀取。
        
- `nl [file-list]`: 顯示帶行號的檔案內容 (功能類似 `cat -n`)。
    
- `pr [file-list]`: 分頁格式化檔案內容，並在每頁頂部加上包含日期、時間、檔名和頁碼的標頭。
    

### 分頁檢視檔案

- `more [options] [file-list]`: 分頁顯示檔案內容。
    
    - `+/str`: 從包含 `str` 的第一行前兩行開始顯示。
        
    - `-nN`: 每螢幕/頁顯示 N 行。
        
    - `+N`: 從第 N 行開始顯示。
        
    - 按 `<Space>` 顯示下一螢幕，按 `<Enter>` 顯示下一行，按 `q` 或 `Q` 退出。
        
- `less [options] [file-list]`: 功能更強大且更有效率的分頁檢視器，支援 `vi` 的部分指令，如向前/向後搜尋。啟動時不需讀取整個檔案。
    

### 檢視檔案的開頭或結尾

- `head [option] [file-list]`: 顯示檔案的初始部分 (預設前 10 行)。
    
    - `-N`: 顯示前 N 行。
        
- `tail [option] [file-list]`: 顯示檔案的末尾部分 (預設後 10 行)。
    
    - `-f`: 持續顯示檔案增長的內容 (常用於監控日誌檔)，按 `<Ctrl+C>` 終止。
        
    - `+n`: 從第 n 行開始顯示。
        
    - `-n N`: 顯示後 N 行 (注意：在某些系統中 `-N` 表示後 N 行，與 `head` 不同)。
        
    - `-r`: 反向顯示行 (最後一行最先顯示)。
        

## 複製檔案 (`cp`)

- `cp [options] source-file target-file`
    
- `cp [options] source-file-list target-directory`
    
- 功能：複製檔案或目錄。
    
- 常用選項：
    
    - `-i`: 如果目標檔案已存在，覆寫前提示。
        
    - `-r` 或 `-R`: 遞迴複製目錄及其內容。
        
    - `-p`: 保留檔案屬性，如擁有者、群組、權限和修改時間。
        
    - `-f`: 強制複製，即使目標檔案沒有寫入權限 (需謹慎使用)。
        
- 權限需求：
    
    - 需有讀取來源檔案的權限。
        
    - 需有執行 (搜尋) 包含來源檔案和目標檔案的目錄的權限。
        
    - 若目標檔案不存在，需有寫入目標目錄的權限。
        
    - 若目標檔案已存在，需有寫入該目標檔案的權限。
        

## 移動檔案 (`mv`)

- `mv [options] source-file target-file` (若目標是檔案，則為重新命名或移動並覆寫)
    
- `mv [options] source-file-list target-directory` (若目標是目錄，則移動檔案至該目錄下)
    
- 功能：移動或重新命名檔案/目錄。
    
- 常用選項：
    
    - `-i`: 如果目標檔案已存在，覆寫前提示。
        
    - `-f`: 強制移動，忽略目標檔案的權限 (需謹慎使用)。
        
- 權限需求：
    
    - 需有寫入和執行包含來源檔案的目錄的權限。
        
    - 不一定需要來源檔案本身的讀寫執行權限。
        
    - 需有寫入和執行包含目標檔案的目錄的權限，以及路徑中所有目錄的執行權限。
        
    - 若目標檔案已存在，需有寫入該目標檔案的權限。
        
- 若來源和目標在同一檔案系統，通常是重新命名操作 (改變目錄項目)。若在不同檔案系統，則是複製後刪除來源。
    

## 移除/刪除檔案 (`rm`)

- `rm [options] file-list`
    
- 功能：移除 (刪除) 檔案。
    
- 常用選項：
    
    - `-i`: 移除前提示。
        
    - `-f`: 強制移除，不提示且忽略不存在的檔案及參數 (需謹慎使用)。
        
    - `-r` 或 `-R`: 遞迴移除目錄及其內容 (極度危險，需非常小心)。
        
- 權限需求：
    
    - 需有寫入包含該檔案的目錄的權限。
        
    - 通常也需要該目錄的執行權限。
        
    - 檔案本身的寫入權限可能會影響是否提示 (取決於系統和 `-f` 選項)。
        

## 移除/刪除目錄 (`rmdir`, `rm -r`)

- `rmdir directory-list`: 移除空目錄。
    
- `rm -r directory-list`: 遞迴移除目錄及其所有內容 (包括非空目錄)。
    
    - `rm -rf directory-list`: 強制遞迴移除，不提示 (極度危險)。
        

## 確定檔案大小 (`ls -l`, `wc`)

- `ls -l file-list`: 長列表格式的第五個欄位顯示檔案大小 (以位元組為單位)。
    
- `wc [options] [file-list]`: 計算檔案的行數、字數和位元組數/字元數。
    
    - `-l`: 只顯示行數。
        
    - `-w`: 只顯示字數。
        
    - `-c`: 只顯示位元組數。
        
    - `-m`: 只顯示字元數 (在某些系統中)。
        
    - 若無 `file-list`，從標準輸入讀取。
        

## 附加到檔案 (`>>`)

- `command >> destination-file`
    
- 功能：將 `command` 的標準輸出附加到 `destination-file` 的末尾。如果檔案不存在，則建立它。
    
- 範例：
    
    - `cat source-file >> target-file`: 將 `source-file` 的內容附加到 `target-file`。
        
    - `cat >> target-file`: 從鍵盤讀取輸入並附加到 `target-file` (按 `<Ctrl+D>` 結束)。
        

## 合併檔案 (`>`)

- `command > destination-file`
    
- 功能：將 `command` 的標準輸出寫入 `destination-file`。**如果檔案已存在，其內容會被覆寫。** 如果檔案不存在，則建立它。
    
- 範例：
    
    - `cat source1 source2 > combined-file`: 將 `source1` 和 `source2` 的內容合併到 `combined-file`。
        
    - `cat > new-file`: 從鍵盤讀取輸入並存入 `new-file` (按 `<Ctrl+D>` 結束)。
        

## 比較檔案 (`diff`)

- `diff [options] file1 file2`
    
- 功能：逐行比較兩個檔案，並顯示它們之間的差異。
    
- 輸出格式：類似於 `ed` 編輯器的指令，指示如何將 `file1` 轉換為 `file2`。
    
    - `LaR1,R2`: 表示 `file1` 的第 `L` 行之後，需要附加 `file2` 的第 `R1` 到 `R2` 行。
        
    - `L1,L2cR1,R2`: 表示 `file1` 的第 `L1` 到 `L2` 行需要更改為 `file2` 的第 `R1` 到 `R2` 行。
        
    - `L1,L2dL`: 表示 `file1` 的第 `L1` 到 `L2` 行需要刪除 (對應 `file2` 的第 `L` 行之後)。
        
- 常用選項：
    
    - `-b`: 忽略行尾空白，並將其他連續空白視為相等。
        
    - `-i`: 忽略大小寫差異。
        
    - `-u`: 以統一格式 (unified format) 顯示差異，更易讀。
        
    - `-r`: 遞迴比較目錄。
        
    - `-q`: 只報告檔案是否不同，不顯示差異細節。
        
- 如果檔案相同，`diff` 不產生任何輸出。
    

## 定位並移除文字檔案中的重複內容 (`uniq`)

- `uniq [options] [input-file [output-file]]`
    
- 功能：從已排序的輸入檔案中移除或報告重複的相鄰行。
    
- **重要**：`uniq` 只處理相鄰的重複行，因此通常與 `sort` 配合使用：`sort input-file | uniq`。
    
- 常用選項：
    
    - `-c`: 在每行前面加上該行出現的次數。
        
    - `-d`: 只顯示重複的行 (每組重複行只顯示一次)。
        
    - `-u`: 只顯示不重複的行。
        
    - `-i`: 比較時忽略大小寫。
        
- 若未指定 `output-file`，輸出到標準輸出。若未指定 `input-file`，從標準輸入讀取。
    

[[Unix學習筆記_總覽]]